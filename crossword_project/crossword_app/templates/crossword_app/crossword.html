<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Crossword Puzzle</title>
    <style>
        .grid { display: grid; grid-template-columns: repeat(4, 50px); grid-gap: 2px; }
        .cell { width: 50px; height: 50px; text-align: center; vertical-align: middle; font-size: 16px; position: relative; }
        .input-cell { border: 1px solid #000; background-color: white; }
        .black-cell { background-color: black; }
        .clue-number { font-size: 12px; position: absolute; top: 2px; left: 2px; color: black; }
    </style>
</head>
<body>
    <h1>Crossword Puzzle</h1>
    {% if error_message %}
        <p style="color: red;">{{ error_message }}</p>
    {% endif %}

    <h2>Across Clues</h2>
    <ul>
        {% for clue in across_clues %}
            <li>{{ clue.clue_text }}</li>
        {% endfor %}
    </ul>

    <h2>Down Clues</h2>
    <ul>
        {% for clue in down_clues %}
            <li>{{ clue.clue_text }}</li>
        {% endfor %}
    </ul>

    <!-- クロスワード入力フォーム -->
    <form action="{% url 'validate_answer' %}" method="post">
        {% csrf_token %}
        <div class="grid">
            {% for row in grid_structure %}
                {% for cell in row %}
                    {% if cell == 0 %}
                        <!-- 黒セル -->
                        <div class="cell black-cell"></div>
                    {% elif cell == 1 %}
                        <!-- 解答入力セル -->
                        <div class="cell input-cell">
                            <input type="text" name="answer{{ forloop.counter }}" maxlength="1" style="width: 100%; height: 100%; text-align: center;" aria-label="解答はこちら">
                        </div>
                    {% else %}
                        <!-- 番号付き解答入力セル -->
                        <div class="cell input-cell">
                            <span class="clue-number">{{ cell }}</span>
                            <input type="text" name="answer{{ forloop.counter }}" maxlength="1" style="width: 100%; height: 100%; text-align: center;" aria-label="解答はこちら">
                        </div>
                    {% endif %}
                {% endfor %}
            {% endfor %}
        </div>
        <button type="submit">Submit Answer</button>
    </form>
</body>
</html>
